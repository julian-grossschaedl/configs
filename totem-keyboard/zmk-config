#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>

/ {
    combos {
        compatible = "zmk,combos";

        Enter {
            bindings = <&kp ENTER>;
            key-positions = <16 17 18>;
            layers = <0 1 4 4>;
        };

        hyphen {
            bindings = <&kp MINUS>;
            key-positions = <19 31>;
        };

        tilde {
            bindings = <&kp TILDE>;
            key-positions = <0 20>;
        };

        tab {
            bindings = <&kp TAB>;
            key-positions = <11 12>;
            layers = <1 0>;
        };
    };

    macros {
        macos_screenshot: macos_screenshot {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LS(LG(NUMBER_4))>;
            label = "MACOS_SCREENSHOT";
        };

        macos_video: macos_video {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LS(LG(N5))>;
            label = "MACOS_VIDEO";
        };
    };

    behaviors {
        mouse: mouse {
            compatible = "zmk,behavior-mouse-key-press";
            label = "MOUSE";
            #binding-cells = <1>;
        };
    };

    keymap {
        compatible = "zmk,keymap";

        base_layer {
            bindings = <
                         &kp Q  &kp W  &kp E                       &kp R   &kp T        &kp Z      &kp U   &kp I             &kp O    &kp P
                         &kp A  &kp S  &kp D                       &kp F   &kp G        &kp H      &kp J   &kp K             &kp L    &kp SEMI
&mt LEFT_CONTROL ESCAPE  &kp Y  &kp X  &kp C                       &kp V   &kp B        &kp N      &kp M   &kp COMMA         &kp DOT  &kp FSLH  &kp APOS
                                       &mt LEFT_COMMAND BACKSPACE  &tog 1  &kp SPACE    &kp RSHFT  &tog 4  &mt LEFT_ALT DEL
            >;
        };

        symbol_layer {
            bindings = <
        &kp N1         &kp N2  &kp N3  &kp N4  &kp N5    &kp N6  &kp N7  &kp N8  &kp N9  &kp N0
        &kp BACKSLASH  &trans  &trans  &trans  &trans    &trans  &trans  &trans  &trans  &trans
&trans  &trans         &trans  &trans  &trans  &trans    &trans  &trans  &trans  &trans  &trans  &trans
                               &trans  &trans  &trans    &trans  &trans  &trans
            >;
        };

        numbers_layer {
            bindings = <
        &trans  &trans  &trans  &trans  &trans    &kp FSLH  &kp N7  &kp N8  &kp N9  &kp MINUS
        &trans  &trans  &trans  &trans  &trans    &trans    &kp N4  &kp N5  &kp N6  &kp PLUS
&trans  &trans  &trans  &trans  &trans  &trans    &kp N0    &kp N1  &kp N2  &kp N3  &trans     &trans
                        &trans  &trans  &trans    &trans    &trans  &trans
            >;
        };

        system_layer {
            bindings = <
        &trans  &trans  &trans  &trans  &macos_screenshot    &macos_screenshot  &kp K_MUTE      &kp C_VOLUME_DOWN  &kp C_VOL_UP  &trans
        &trans  &trans  &trans  &trans  &trans               &kp LEFT_ARROW     &kp DOWN        &kp UP             &kp RIGHT     &trans
&trans  &trans  &trans  &trans  &trans  &trans               &kp C_PLAY_PAUSE   &kp C_PREVIOUS  &kp C_NEXT         &trans        &trans  &trans
                        &trans  &trans  &trans               &trans             &trans          &trans
            >;
        };
    };
};

